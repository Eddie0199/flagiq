export const LOCAL_PACKS = [
  {
    packId: "ch",
    countryCode: "CH",
    title: "Switzerland",
    unlockTier: 1,
    levels: [
      { levelId: "ch_ag", displayName: "Aargau", flagSrc: "https://placehold.co/96x64?text=AG" },
      { levelId: "ch_ai", displayName: "Appenzell Innerrhoden", flagSrc: "https://placehold.co/96x64?text=AI" },
      { levelId: "ch_ar", displayName: "Appenzell Ausserrhoden", flagSrc: "https://placehold.co/96x64?text=AR" },
      { levelId: "ch_be", displayName: "Bern", flagSrc: "https://placehold.co/96x64?text=BE" },
      { levelId: "ch_bl", displayName: "Basel-Landschaft", flagSrc: "https://placehold.co/96x64?text=BL" },
      { levelId: "ch_bs", displayName: "Basel-Stadt", flagSrc: "https://placehold.co/96x64?text=BS" },
      { levelId: "ch_fr", displayName: "Fribourg", flagSrc: "https://placehold.co/96x64?text=FR" },
      { levelId: "ch_ge", displayName: "Geneva", flagSrc: "https://placehold.co/96x64?text=GE" },
      { levelId: "ch_gl", displayName: "Glarus", flagSrc: "https://placehold.co/96x64?text=GL" },
      { levelId: "ch_gr", displayName: "Graubünden", flagSrc: "https://placehold.co/96x64?text=GR" },
      { levelId: "ch_ju", displayName: "Jura", flagSrc: "https://placehold.co/96x64?text=JU" },
      { levelId: "ch_lu", displayName: "Lucerne", flagSrc: "https://placehold.co/96x64?text=LU" },
      { levelId: "ch_ne", displayName: "Neuchâtel", flagSrc: "https://placehold.co/96x64?text=NE" },
      { levelId: "ch_nw", displayName: "Nidwalden", flagSrc: "https://placehold.co/96x64?text=NW" },
      { levelId: "ch_ow", displayName: "Obwalden", flagSrc: "https://placehold.co/96x64?text=OW" },
      { levelId: "ch_sg", displayName: "St. Gallen", flagSrc: "https://placehold.co/96x64?text=SG" },
      { levelId: "ch_sh", displayName: "Schaffhausen", flagSrc: "https://placehold.co/96x64?text=SH" },
      { levelId: "ch_so", displayName: "Solothurn", flagSrc: "https://placehold.co/96x64?text=SO" },
      { levelId: "ch_sz", displayName: "Schwyz", flagSrc: "https://placehold.co/96x64?text=SZ" },
      { levelId: "ch_tg", displayName: "Thurgau", flagSrc: "https://placehold.co/96x64?text=TG" },
      { levelId: "ch_ti", displayName: "Ticino", flagSrc: "https://placehold.co/96x64?text=TI" },
      { levelId: "ch_ur", displayName: "Uri", flagSrc: "https://placehold.co/96x64?text=UR" },
      { levelId: "ch_vd", displayName: "Vaud", flagSrc: "https://placehold.co/96x64?text=VD" },
      { levelId: "ch_vs", displayName: "Valais", flagSrc: "https://placehold.co/96x64?text=VS" },
      { levelId: "ch_zg", displayName: "Zug", flagSrc: "https://placehold.co/96x64?text=ZG" },
      { levelId: "ch_zh", displayName: "Zürich", flagSrc: "https://placehold.co/96x64?text=ZH" },
    ],
  },
  {
    packId: "es",
    countryCode: "ES",
    title: "Spain",
    unlockTier: 1,
    levels: [
      { levelId: "es_an", displayName: "Andalusia", flagSrc: "https://placehold.co/96x64?text=AN" },
      { levelId: "es_ar", displayName: "Aragon", flagSrc: "https://placehold.co/96x64?text=AR" },
      { levelId: "es_as", displayName: "Asturias", flagSrc: "https://placehold.co/96x64?text=AS" },
      { levelId: "es_ib", displayName: "Balearic Islands", flagSrc: "https://placehold.co/96x64?text=IB" },
      { levelId: "es_pv", displayName: "Basque Country", flagSrc: "https://placehold.co/96x64?text=PV" },
      { levelId: "es_cn", displayName: "Canary Islands", flagSrc: "https://placehold.co/96x64?text=CN" },
      { levelId: "es_cb", displayName: "Cantabria", flagSrc: "https://placehold.co/96x64?text=CB" },
      { levelId: "es_cl", displayName: "Castile and León", flagSrc: "https://placehold.co/96x64?text=CL" },
      { levelId: "es_cm", displayName: "Castile-La Mancha", flagSrc: "https://placehold.co/96x64?text=CM" },
      { levelId: "es_ct", displayName: "Catalonia", flagSrc: "https://placehold.co/96x64?text=CT" },
      { levelId: "es_ex", displayName: "Extremadura", flagSrc: "https://placehold.co/96x64?text=EX" },
      { levelId: "es_ga", displayName: "Galicia", flagSrc: "https://placehold.co/96x64?text=GA" },
      { levelId: "es_ri", displayName: "La Rioja", flagSrc: "https://placehold.co/96x64?text=RI" },
      { levelId: "es_md", displayName: "Madrid", flagSrc: "https://placehold.co/96x64?text=MD" },
      { levelId: "es_mc", displayName: "Murcia", flagSrc: "https://placehold.co/96x64?text=MC" },
      { levelId: "es_nc", displayName: "Navarre", flagSrc: "https://placehold.co/96x64?text=NC" },
      { levelId: "es_vc", displayName: "Valencia", flagSrc: "https://placehold.co/96x64?text=VC" },
    ],
  },
  {
    packId: "de",
    countryCode: "DE",
    title: "Germany",
    unlockTier: 1,
    levels: [
      { levelId: "de_bw", displayName: "Baden-Württemberg", flagSrc: "https://placehold.co/96x64?text=BW" },
      { levelId: "de_by", displayName: "Bavaria", flagSrc: "https://placehold.co/96x64?text=BY" },
      { levelId: "de_be", displayName: "Berlin", flagSrc: "https://placehold.co/96x64?text=BE" },
      { levelId: "de_bb", displayName: "Brandenburg", flagSrc: "https://placehold.co/96x64?text=BB" },
      { levelId: "de_hb", displayName: "Bremen", flagSrc: "https://placehold.co/96x64?text=HB" },
      { levelId: "de_hh", displayName: "Hamburg", flagSrc: "https://placehold.co/96x64?text=HH" },
      { levelId: "de_he", displayName: "Hesse", flagSrc: "https://placehold.co/96x64?text=HE" },
      { levelId: "de_ni", displayName: "Lower Saxony", flagSrc: "https://placehold.co/96x64?text=NI" },
      { levelId: "de_mv", displayName: "Mecklenburg-Vorpommern", flagSrc: "https://placehold.co/96x64?text=MV" },
      { levelId: "de_nw", displayName: "North Rhine-Westphalia", flagSrc: "https://placehold.co/96x64?text=NW" },
      { levelId: "de_rp", displayName: "Rhineland-Palatinate", flagSrc: "https://placehold.co/96x64?text=RP" },
      { levelId: "de_sl", displayName: "Saarland", flagSrc: "https://placehold.co/96x64?text=SL" },
      { levelId: "de_sn", displayName: "Saxony", flagSrc: "https://placehold.co/96x64?text=SN" },
      { levelId: "de_st", displayName: "Saxony-Anhalt", flagSrc: "https://placehold.co/96x64?text=ST" },
      { levelId: "de_sh", displayName: "Schleswig-Holstein", flagSrc: "https://placehold.co/96x64?text=SH" },
      { levelId: "de_th", displayName: "Thuringia", flagSrc: "https://placehold.co/96x64?text=TH" },
    ],
  },
  {
    packId: "us",
    countryCode: "US",
    title: "United States",
    unlockTier: 1,
    levels: [
      { levelId: "us_al", displayName: "Alabama", flagSrc: "https://placehold.co/96x64?text=AL" },
      { levelId: "us_ak", displayName: "Alaska", flagSrc: "https://placehold.co/96x64?text=AK" },
      { levelId: "us_az", displayName: "Arizona", flagSrc: "https://placehold.co/96x64?text=AZ" },
      { levelId: "us_ar", displayName: "Arkansas", flagSrc: "https://placehold.co/96x64?text=AR" },
      { levelId: "us_ca", displayName: "California", flagSrc: "https://placehold.co/96x64?text=CA" },
      { levelId: "us_co", displayName: "Colorado", flagSrc: "https://placehold.co/96x64?text=CO" },
      { levelId: "us_ct", displayName: "Connecticut", flagSrc: "https://placehold.co/96x64?text=CT" },
      { levelId: "us_de", displayName: "Delaware", flagSrc: "https://placehold.co/96x64?text=DE" },
      { levelId: "us_fl", displayName: "Florida", flagSrc: "https://placehold.co/96x64?text=FL" },
      { levelId: "us_ga", displayName: "Georgia", flagSrc: "https://placehold.co/96x64?text=GA" },
      { levelId: "us_hi", displayName: "Hawaii", flagSrc: "https://placehold.co/96x64?text=HI" },
      { levelId: "us_id", displayName: "Idaho", flagSrc: "https://placehold.co/96x64?text=ID" },
      { levelId: "us_il", displayName: "Illinois", flagSrc: "https://placehold.co/96x64?text=IL" },
      { levelId: "us_in", displayName: "Indiana", flagSrc: "https://placehold.co/96x64?text=IN" },
      { levelId: "us_ia", displayName: "Iowa", flagSrc: "https://placehold.co/96x64?text=IA" },
      { levelId: "us_ks", displayName: "Kansas", flagSrc: "https://placehold.co/96x64?text=KS" },
      { levelId: "us_ky", displayName: "Kentucky", flagSrc: "https://placehold.co/96x64?text=KY" },
      { levelId: "us_la", displayName: "Louisiana", flagSrc: "https://placehold.co/96x64?text=LA" },
      { levelId: "us_me", displayName: "Maine", flagSrc: "https://placehold.co/96x64?text=ME" },
      { levelId: "us_md", displayName: "Maryland", flagSrc: "https://placehold.co/96x64?text=MD" },
      { levelId: "us_ma", displayName: "Massachusetts", flagSrc: "https://placehold.co/96x64?text=MA" },
      { levelId: "us_mi", displayName: "Michigan", flagSrc: "https://placehold.co/96x64?text=MI" },
      { levelId: "us_mn", displayName: "Minnesota", flagSrc: "https://placehold.co/96x64?text=MN" },
      { levelId: "us_ms", displayName: "Mississippi", flagSrc: "https://placehold.co/96x64?text=MS" },
      { levelId: "us_mo", displayName: "Missouri", flagSrc: "https://placehold.co/96x64?text=MO" },
      { levelId: "us_mt", displayName: "Montana", flagSrc: "https://placehold.co/96x64?text=MT" },
      { levelId: "us_ne", displayName: "Nebraska", flagSrc: "https://placehold.co/96x64?text=NE" },
      { levelId: "us_nv", displayName: "Nevada", flagSrc: "https://placehold.co/96x64?text=NV" },
      { levelId: "us_nh", displayName: "New Hampshire", flagSrc: "https://placehold.co/96x64?text=NH" },
      { levelId: "us_nj", displayName: "New Jersey", flagSrc: "https://placehold.co/96x64?text=NJ" },
      { levelId: "us_nm", displayName: "New Mexico", flagSrc: "https://placehold.co/96x64?text=NM" },
      { levelId: "us_ny", displayName: "New York", flagSrc: "https://placehold.co/96x64?text=NY" },
      { levelId: "us_nc", displayName: "North Carolina", flagSrc: "https://placehold.co/96x64?text=NC" },
      { levelId: "us_nd", displayName: "North Dakota", flagSrc: "https://placehold.co/96x64?text=ND" },
      { levelId: "us_oh", displayName: "Ohio", flagSrc: "https://placehold.co/96x64?text=OH" },
      { levelId: "us_ok", displayName: "Oklahoma", flagSrc: "https://placehold.co/96x64?text=OK" },
      { levelId: "us_or", displayName: "Oregon", flagSrc: "https://placehold.co/96x64?text=OR" },
      { levelId: "us_pa", displayName: "Pennsylvania", flagSrc: "https://placehold.co/96x64?text=PA" },
      { levelId: "us_ri", displayName: "Rhode Island", flagSrc: "https://placehold.co/96x64?text=RI" },
      { levelId: "us_sc", displayName: "South Carolina", flagSrc: "https://placehold.co/96x64?text=SC" },
      { levelId: "us_sd", displayName: "South Dakota", flagSrc: "https://placehold.co/96x64?text=SD" },
      { levelId: "us_tn", displayName: "Tennessee", flagSrc: "https://placehold.co/96x64?text=TN" },
      { levelId: "us_tx", displayName: "Texas", flagSrc: "https://placehold.co/96x64?text=TX" },
      { levelId: "us_ut", displayName: "Utah", flagSrc: "https://placehold.co/96x64?text=UT" },
      { levelId: "us_vt", displayName: "Vermont", flagSrc: "https://placehold.co/96x64?text=VT" },
      { levelId: "us_va", displayName: "Virginia", flagSrc: "https://placehold.co/96x64?text=VA" },
      { levelId: "us_wa", displayName: "Washington", flagSrc: "https://placehold.co/96x64?text=WA" },
      { levelId: "us_wv", displayName: "West Virginia", flagSrc: "https://placehold.co/96x64?text=WV" },
      { levelId: "us_wi", displayName: "Wisconsin", flagSrc: "https://placehold.co/96x64?text=WI" },
      { levelId: "us_wy", displayName: "Wyoming", flagSrc: "https://placehold.co/96x64?text=WY" },
    ],
  },
  {
    packId: "gb",
    countryCode: "GB",
    title: "United Kingdom",
    unlockTier: 2,
    levels: [
      { levelId: "gb_eng", displayName: "England", flagSrc: "https://placehold.co/96x64?text=ENG" },
      { levelId: "gb_sct", displayName: "Scotland", flagSrc: "https://placehold.co/96x64?text=SCT" },
      { levelId: "gb_wls", displayName: "Wales", flagSrc: "https://placehold.co/96x64?text=WLS" },
      { levelId: "gb_nir", displayName: "Northern Ireland", flagSrc: "https://placehold.co/96x64?text=NIR" },
    ],
  },
];

export function buildLocalPackPool(pack) {
  if (!pack) return [];
  return pack.levels.map((level) => ({
    code: level.levelId,
    name: level.displayName,
    img: level.flagSrc,
    difficulty: level.difficulty,
  }));
}

export function buildLocalPackLevels(pack) {
  const pool = buildLocalPackPool(pack);
  return pack.levels.map((level) => ({
    id: level.levelId,
    label: level.displayName,
    pool,
    questionCount: level.questionCount ?? 1,
    fixedFlagCode: level.levelId,
  }));
}

export function getLocalPackProgress(pack, progress) {
  const starsByLevel = progress?.local?.starsByLevel || {};
  const totalLevels = pack?.levels?.length || 0;
  const completedLevels = (pack?.levels || []).reduce((sum, level) => {
    const stars = Number(starsByLevel[level.levelId] || 0);
    return sum + (stars > 0 ? 1 : 0);
  }, 0);
  const starsEarned = (pack?.levels || []).reduce((sum, level) => {
    return sum + Number(starsByLevel[level.levelId] || 0);
  }, 0);
  const maxStars = totalLevels * 3;
  return { completedLevels, totalLevels, starsEarned, maxStars };
}

export function isLocalPackUnlocked(pack) {
  return Number(pack?.unlockTier || 1) <= 1;
}
